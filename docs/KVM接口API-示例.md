# KVM管理平台接口文档

### 一、接口文档说明
#### 1、通用报文:

#### 2、返回码表：

| 返回码 | 含义 |
| :---: | :---: |
|0     | 成功|
|10001 | 登录失败|
|10002 | 用户名错误|
|30001 | 不支持的网络类型|
|30002 | 网络命名空间不存在|
|30003 | 网络设备不存在|
|30004 | 不支持的设备操作|
|30005 | 网络设备名称过长|
|30006 | 无效的设备参数值|
|30007 | 虚拟机不存在|
|30008 | 虚拟机关机失败|
|30009 | hypervisor连接失败|
|40001 |  获取CPU信息失败 |
|40101 | 获取内存信息失败|
|40201 | 获取存储信息失败|
|40301 | 获取网络信息失败|
|40401 | 获取机器硬件信息失败|
|40501 | 获取系统服务信息失败|
|40502 | 获取虚拟机信息失败|
|99999 | 系统异常，请稍后重试|
|-1    | 未知异常|
    	
    	
#### 3、修改记录:
	20191217
	1、编写统一格式样例

****

### Network ###
##

#### 1、创建网络 ####
目前支持创建两种网络，flat和vlan，注意两种网络不要绑定在同一个物理设备上

* URL

	### http://host:port/

* Method

	###	 **POST** 请求，**body** 参数使用 **json** 格式

* Parameters

    | 参数 |描述|必填|父级|数据类型|备注|
    | :---: | :---: | :---: | :---: | :---: | :---: |
    |command | 命令类型、表示某种操作 |是||str | 这里是`create` |
    |handler | 处理headler |是| |str | 网络的操作都是使用`NetworkHandler` |
	|data     | 业务数据 |是| | object| |
	|network_id | 网络uuid |是|data|str |  |
	|network_type|网络类型|是|data|int|`flat`或者`vlan`类型|
	|physical_interface | 绑定的物理网卡名称|是|data|int|   |
	|vlan_id | vlan id|否|data|str| 如果是vlan网络，则需要提供此参数 |


* 示例：

	* body
	
	```
	{
      "command": "create",
      "handler": "NetworkHandler",
      "data": {
          "network_id": "5b0503ba-1af4-11ea-baa2-000c2902e179",
           "network_type": "vlan",
           "physical_interface": "ens224",
          "vlan_id": "1001"
       }
   	}
	```


* 返回

	| 参数 |描述|父级|数据类型|备注|
	| :------: |:-----:| :-----:| :---:| :----:|
	|code| 返回码 | |int | 对应code含义见返回码表 |
    |msg | 返回信息 | |str |  |
	|data | 返回业务数据 | | object| |
	

* 示例：
	* return
	
	```
	{
		"code": 0,
		"msg": "成功",
		"data": {
			"name": "xxxx"
		} 
	}
	```
